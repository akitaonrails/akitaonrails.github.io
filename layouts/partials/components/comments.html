<!-- Disqus -->
{{- with .Site.Config.Services.Disqus.Shortname }}
<div id="disqus_thread" style="color-scheme: light; background-color: #fff;"></div>
<script>
    var disqus_config = function () {
        this.page.url = '{{ $.Page.Permalink }}';
        this.page.identifier = '{{ $.Page.RelPermalink }}';
    };
    (function() {
        function loadDisqus() {
            // Save and override color-scheme
            var originalColorScheme = document.documentElement.style.colorScheme;
            document.documentElement.style.colorScheme = 'light';

            var d = document, s = d.createElement('script');
            s.src = 'https://{{ . }}.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            s.onload = function() {
                setTimeout(function() {
                    document.documentElement.style.colorScheme = originalColorScheme;
                }, 500);
            };
            (d.head || d.body).appendChild(s);
        }

        // Delay load to ensure DOM and styles are ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadDisqus);
        } else {
            setTimeout(loadDisqus, 0);
        }
    })();
</script>
<noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
        comments powered by Disqus.
    </a>
</noscript>
{{ end }}
