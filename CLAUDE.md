# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Hugo static site using the [Hextra](https://github.com/imfing/hextra) theme for Fabio Akita's blog at akitaonrails.com. Content is in Brazilian Portuguese.

## Essential Commands

```bash
# Development (Docker - recommended)
./scripts/dev.sh start           # Start server at http://localhost:1313
./scripts/dev.sh stop            # Stop server
./scripts/dev.sh logs            # View logs
./scripts/dev.sh generate-index  # Regenerate homepage index

# Development (local - requires Hugo Extended, Go 1.21+, Ruby)
./scripts/generate_index.rb
hugo server --logLevel debug --disableFastRender -p 1313

# Production build
hugo --gc --minify

# Create new post
./scripts/dev.sh new-post "Title"
```

## Content Structure

Posts use the path pattern: `content/YYYY/MM/DD/slug-name/index.md`

Required frontmatter:
```yaml
---
title: "Post Title"
date: '2024-12-14T16:48:00-03:00'  # ISO 8601 with timezone (-03:00 Brazil)
draft: false
---
```

Optional: `slug`, `tags`, `description`

**Critical**: The file `content/_index.md` is auto-generated by `generate_index.rb`. Never edit it manually.

## Architecture

- **Theme**: Hextra (via Hugo modules in `go.mod`)
- **Customizations**: `layouts/partials/custom/head-end.html` (CSS), `layouts/partials/components/comments.html` (Disqus), `layouts/shortcodes/youtube.html`
- **Index generation**: `scripts/generate_index.rb` scans all posts and generates chronological homepage listing
- **Deployment**: GitHub Pages via `.github/workflows/pages.yaml` on push to `master`

## Key Configuration

- Hugo Extended required (SCSS support)
- Raw HTML enabled in markdown (`goldmark.renderer.unsafe: true`)
- Disqus comments configured with shortname `akitaonrails`
- Default branch: `master`

## Custom Shortcodes

```markdown
{{< youtube id="VIDEO_ID" >}}
```

## Utility Scripts

| Script | Purpose |
|--------|---------|
| `scripts/generate_index.rb` | Regenerates `_index.md` homepage |
| `scripts/fix-*.rb` | Legacy migration scripts (not for regular use) |
